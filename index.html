<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ä¿¡å°‘å¦‡è¿›ç¾¤æ”¶è´¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 65vh;
            padding: 10px;
        }
        
        .container {
            max-width: 320px;
            width: 100%;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background: #fff;
            color: Black;
            padding: 10px;
            text-align: center;
        }
        
        h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .content {
            padding: 10px;
            text-align: center;
        }
        
        .qr-container {
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }
        
        .qr-image {
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: #999;
            overflow: hidden;
            border: 2px solid #07c160;
        }
        
        .price {
            font-size: 28px;
            color: #9b9827;
            margin: 20px 0;
            font-weight: bold;
        }

        .expiry-info {
            font-size: 12px;
            color: #666;
            margin: 10px 0;
        }

        .success-message {
            color: #07c160;
            font-size: 16px;
            margin: 10px 0;
            display: none;
        }

        .countdown-tip {
            font-size: 14px;
            color: #ff6b6b;
            margin: 10px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>å¾®ä¿¡å°‘å¦‡è¿›ç¾¤æ”¶è´¹</h1>
            <p class="subtitle">ä»˜è´¹åŠ å…¥å®¶åº­ç§å¯†ç¾¤</p>
        </div>        
        <div class="content">
		        â€œç¦»å¼‚ äº¤å‹ å®¶åº­ å¼€æˆ¿ å‡ºè½¨â€
            <div class="price">ä»˜è´¹è¿›ç¾¤ğŸ’¸Â¥3å…ƒ</div>            
            <!-- äºŒç»´ç å®¹å™¨ -->
            <div class="qr-container">
                <!-- æ”¯ä»˜äºŒç»´ç  -->
                <div class="qr-image" id="paymentQR">
                    <img src="eb1257f6-b1e0-5b02-be27-6e57ca18bffd.png" alt="å¾®ä¿¡æ”¯ä»˜äºŒç»´ç " style="width:100%;height:100%;object-fit:cover;">
                </div>                
                <!-- ç¾¤äºŒç»´ç ï¼ˆåˆå§‹éšè—ï¼‰ -->
                <div class="qr-image" id="groupQR" style="display: none;">
                    <img src="mmqrcode1759374699028.png" alt="ç¾¤äºŒç»´ç " style="width:100%;height:100%;object-fit:cover;">
                </div>
            </div>
            <!-- æœ‰æ•ˆæœŸä¿¡æ¯ -->
            <div class="expiry-info" id="expiryInfo"></div>           
            <!-- å€’è®¡æ—¶æç¤º -->
            <div class="countdown-tip" id="countdownTip">æ³¨æ„ï¼š5åˆ†é’Ÿåæ˜¾ç¤ºç¾¤å›¾ç‰‡..</div>
            <!-- æˆåŠŸä¿¡æ¯ -->
            <div class="success-message" id="successMessage">å·²è§£é”'æ‰«æäºŒç»´ç å…¥ç¾¤</div>
        </div>
    </div>

    <script>
        let countdownInterval;
        let countdownTime = 5 * 60; // 5åˆ†é’Ÿï¼Œå•ä½ï¼šç§’
        let countdownStarted = false;

        // è®¡ç®—æœ‰æ•ˆæœŸå¹¶æ˜¾ç¤º
        function updateExpiryInfo() {
            const now = new Date();
            const expiryDate = new Date(now);
            expiryDate.setDate(now.getDate() + 1); // 1å¤©åè¿‡æœŸ
            
            const expiryString = expiryDate.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            
            document.getElementById('expiryInfo').textContent = `æœ‰æ•ˆæœŸè‡³ï¼š${expiryString}`;
        }

        // å¼€å§‹å€’è®¡æ—¶
        function startCountdown() {
            if (countdownStarted) return;
            countdownStarted = true;
            
            const countdownTip = document.getElementById('countdownTip');
            
            countdownInterval = setInterval(function() {
                const minutes = Math.floor(countdownTime / 60);
                const seconds = countdownTime % 60;
                
                countdownTip.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} åæ˜¾ç¤ºç¾¤å›¾ç‰‡..`;
                
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    showGroupQRCode();
                }
                countdownTime--;
            }, 1000);
        }

        // æ˜¾ç¤ºç¾¤äºŒç»´ç 
        function showGroupQRCode() {
            document.getElementById('paymentQR').style.display = 'none';
            document.getElementById('groupQR').style.display = 'flex';
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('countdownTip').style.display = 'none';
        }

        // ç›‘å¬æ”¯ä»˜äºŒç»´ç ç‚¹å‡»äº‹ä»¶ æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
        document.querySelector('#paymentQR img').addEventListener('click', function() {
            // åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥ç”±å¾®ä¿¡æ”¯ä»˜å›è°ƒè§¦å‘
            startCountdown();
        });

        // è‡ªåŠ¨æ£€æµ‹æ”¯ä»˜çŠ¶æ€ æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡
        setInterval(function() {
            // åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è°ƒç”¨åç«¯APIæ£€æŸ¥æ”¯ä»˜çŠ¶æ€
            // ä»¥ä¸‹æ˜¯æ¨¡æ‹Ÿé€»è¾‘ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦ç§»é™¤
            const isPaid = Math.random() < 0.05; // 5%æ¦‚ç‡æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
            if (isPaid && !countdownStarted) {
                startCountdown();
            }
        }, 3000);

        // åˆå§‹åŒ–æ˜¾ç¤ºæœ‰æ•ˆæœŸ
        updateExpiryInfo();

        // æ£€æŸ¥URLå‚æ•°ï¼Œå¦‚æœåŒ…å«æ”¯ä»˜æˆåŠŸå‚æ•°ï¼Œå¼€å§‹å€’è®¡æ—¶
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('payment') === 'success') {
            startCountdown();
        }
    </script>
</body>
</html>
